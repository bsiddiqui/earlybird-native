<div class="settings ng-cloak">
  <ion-header-bar class="bar-assertive" ng-switch="inputDisabled">
    <div class="header-switch" ng-switch-when="true">
      <button ui-sref="earlybird.order" nav-direction="forward" class="button button-clear button-icon icon ion-ios-close-empty"></button>
      <h1 class="title">Settings</h1>
      <button ng-click="enableInput()" class="button button-clear button-icon icon ion-ios-compose-outline"></button>
    </div>

    <div class="header-switch" ng-switch-when="false">
      <button ng-click="disableInput()" class="button button-clear button-icon icon">Cancel</button>
      <h1 class="title">Settings</h1>
      <button ng-click="saveInput(currentUser)" class="button button-clear button-icon icon">Save</button>
    </div>
  </ion-header-bar>

  <ion-content scroll="true">
    <div class="list list-inset">
      <div class="item item-divider">
        General
      </div>

      <fieldset ng-disabled="inputDisabled">
        <label class="item item-fixed item-input">
          <span class="input-label">First Name</span>
          <input type="text" ng-model="currentUser.first_name"></input>
        </label>

        <label class="item item-fixed item-input">
          <span class="input-label">Last Name</span>
          <input type="text" ng-model="currentUser.last_name"></input>
        </label>

        <label class="item item-fixed item-input">
          <span class="input-label">Email</span>
          <input type="text" ng-model="currentUser.email"></input>
        </label>

        <label class="item item-fixed item-input">
          <span class="input-label">Phone</span>
          <input type="text" ng-model="currentUser.phone"></input>
        </label>
      </fieldset>

      <div class="item item-divider">
        Addresses
      </div>

      <div class="item item-fixed item-button-right" ng-repeat="address in currentUser.addresses">
        <h2>{{address.title}}</h2>
        <p>{{address.street1}} {{' ' + address.street2}}, {{address.city}}, {{address.state}} {{address.zip}}</p>
        <button class="button button-icon icon ion-ios-trash" ng-hide="inputDisabled" ng-click="deleteAddress(address, $index)"></button>
      </div>

      <label class="order-add-address item item-button-right">
        <div>Add Address</div>
        <button ng-click="addressModal.show()" class="button button-icon icon ion-ios-plus-outline"></button>
      </label>

      <div class="item item-divider">
        Payments
      </div>

      <div ng-show="currentUser.promo_codes" class="item item-fixed item-radio item-avatar">
        <img ng-src="img/ic-payment-creditcard2x.png"></img>
        <h2>Earlybird Promo Balance</h2>
        <p>${{currentUser.promoBalance()}}</p>
      </div>

      <div class="item item-fixed item-radio item-button-right item-avatar" ng-repeat="card in currentUser.cards">
        <img ng-src="img/ic-payment-{{card.type}}2x.png"></img>
        <h2>{{card.title}}</h2>
        <p>{{card.last_four}}</p>
        <button class="button button-icon icon ion-ios-trash" ng-hide="inputDisabled" ng-click="deleteCard(card, $index)"></button>
      </div>

      <label class="order-add-card item item-button-right">
        <div>Add Payment</div>
        <button ng-click="cardModal.show()" class="button button-icon icon ion-ios-plus-outline"></button>
      </label>

      <div class="item item-divider">
        Promotions
      </div>

      <div class="item item-fixed item-input-inset">
        <label class="item-input-wrapper">
          <input type="text" ng-model="inputs.code"></input>
        </label>
        <button class="button button-positive button-small" ng-click="redeemPromo(inputs.code)">Apply</button>
      </div>

      <button class="button button-block" ng-click="logout()">Logout</button>
    </div>
  </ion-content>
</div>
